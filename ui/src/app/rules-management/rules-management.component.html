<div class="rules-management">
  <h2>Rules Management</h2>
  <form (ngSubmit)="onSubmit()" #ruleForm="ngForm">
    <div>
      <label>Rule Name</label>
      <input name="ruleName" [(ngModel)]="rule.ruleName" required />
    </div>
    <div>
      <label>Description</label>
      <input name="description" [(ngModel)]="rule.description" />
    </div>
    <div>
      <label>Table Name</label>
      <input name="tableName" [(ngModel)]="rule.tableName" required />
    </div>
    <div>
      <label>Column Name</label>
      <input name="columnName" [(ngModel)]="rule.columnName" required />
    </div>
    <div>
      <label>Condition</label>
      <input name="condition" [(ngModel)]="rule.condition" required />
    </div>
    <div>
      <label>Rule Type</label>
      <input name="ruleType" [(ngModel)]="rule.ruleType" required />
    </div>
    <button type="submit">{{ rule.id ? 'Update' : 'Create' }} Rule</button>
    <button type="button" (click)="resetForm()">Clear</button>
  </form>

  <h3>Existing Rules</h3>
  <table>
    <thead>
      <tr>
        <th>Rule Name</th>
        <th>Description</th>
        <th>Table</th>
        <th>Column</th>
        <th>Condition</th>
        <th>Type</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of rules">
        <td>{{ r.ruleName }}</td>
        <td>{{ r.description }}</td>
        <td>{{ r.tableName }}</td>
        <td>{{ r.columnName }}</td>
        <td>{{ r.condition }}</td>
        <td>{{ r.ruleType }}</td>
        <td>
          <button (click)="editRule(r)">Edit</button>
          <button (click)="deleteRule(r.id!)">Delete</button>
          <button (click)="runRule(r)">Run</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="ruleResults.length > 0">
    <h3>Rule Execution Results</h3>
    <table>
      <thead>
        <tr>
          <th>Rule Name</th>
          <th>Table</th>
          <th>Status</th>
          <th>Score</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let res of ruleResults">
          <td>{{ res.ruleName }}</td>
          <td>{{ res.tableName }}</td>
          <td>{{ res.status }}</td>
          <td>{{ res.score }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

